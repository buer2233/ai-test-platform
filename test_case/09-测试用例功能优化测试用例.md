# 测试用例功能优化测试用例（最终确认版）

## 一、测试概述

### 1.1 测试目标

本文档描述了"测试用例功能优化"的完整测试用例，涵盖所有6个核心需求：
1. 串联执行+变量传递+断言
2. 保留测试记录
3. 数据分级存储+自动清理
4. 项目和集合关联
5. 三种批量执行方式
6. 测试报告页面

### 1.2 测试统计

| 测试类型 | 用例数量 | 待测 |
|---------|---------|------|
| 集合管理优化 | 5 | 5 |
| 批量执行功能 | 5 | 5 |
| 变量传递 | 3 | 3 |
| 数据分级存储 | 4 | 4 |
| 测试报告页面 | 7 | 7 |
| 报告操作 | 3 | 3 |
| 图表预留 | 1 | 1 |
| 边界异常 | 4 | 4 |
| **总计** | **32** | **32** |

---

## 二、集合管理优化测试用例（需求4）

### TC001: 批量添加用例到集合

| 项目 | 内容 |
|------|------|
| **用例编号** | TC001 |
| **用例名称** | 批量添加用例到集合 |
| **需求编号** | 4 |
| **优先级** | 高 |
| **测试类型** | 功能测试 |
| **前置条件** | 已登录系统，存在集合和多个未分配用例 |
| **测试步骤** | 1. 进入集合详情页<br>2. 点击"添加用例"按钮<br>3. 在弹出的对话框中，勾选3个用例<br>4. 点击"确认添加" |
| **预期结果** | 1. 对话框关闭<br>2. 用例列表中显示新增的3个用例<br>3. 集合用例数增加3 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC002: 从集合批量移除用例

| 项目 | 内容 |
|------|------|
| **用例编号** | TC002 |
| **用例名称** | 从集合批量移除用例 |
| **需求编号** | 4 |
| **优先级** | 高 |
| **前置条件** | 集合中至少有3个用例 |
| **测试步骤** | 1. 进入集合详情页<br>2. 勾选2个用例<br>3. 点击"批量移除"按钮<br>4. 确认移除 |
| **预期结果** | 1. 选中的2个用例从列表中移除<br>2. 集合用例数减少2 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC003: 单个用例从集合移除

| 项目 | 内容 |
|------|------|
| **用例编号** | TC003 |
| **用例名称** | 单个用例从集合移除 |
| **需求编号** | 4 |
| **优先级** | 中 |
| **测试步骤** | 1. 进入集合详情页<br>2. 找到某个用例<br>3. 点击该用例的"移除"按钮 |
| **预期结果** | 1. 该用例从集合列表中移除<br>2. 用例本身不会被删除 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC004: 集合用例拖拽排序

| 项目 | 内容 |
|------|------|
| **用例编号** | TC004 |
| **用例名称** | 集合用例拖拽排序 |
| **需求编号** | 4 |
| **优先级** | 中 |
| **测试步骤** | 1. 进入集合详情页<br>2. 查看当前用例顺序<br>3. 拖拽第3个用例到第1个位置<br>4. 保存排序 |
| **预期结果** | 1. 用例顺序更新<br>2. 保存后执行时按照新顺序执行 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC005: 用例搜索和筛选

| 项目 | 内容 |
|------|------|
| **用例编号** | TC005 |
| **用例名称** | 用例搜索和筛选 |
| **需求编号** | 4 |
| **优先级** | 低 |
| **测试步骤** | 1. 进入集合详情页<br>2. 在搜索框输入"登录"<br>3. 观察筛选结果 |
| **预期结果** | 只显示名称包含"登录"的用例 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

---

## 三、批量执行功能测试用例（需求5）

### TC006: 按集合执行测试

| 项目 | 内容 |
|------|------|
| **用例编号** | TC006 |
| **用例名称** | 按集合执行测试 |
| **需求编号** | 5 |
| **优先级** | 高 |
| **测试类型** | 功能测试 |
| **前置条件** | 存在包含用例的集合 |
| **测试步骤** | 1. 进入集合详情页<br>2. 点击"执行测试"按钮<br>3. 选择执行环境<br>4. 点击"确认执行"<br>5. 观察执行进度 |
| **预期结果** | 1. 创建执行记录<br>2. 集合中所有用例按顺序执行<br>3. 执行完成后生成报告 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC007: 按项目执行所有用例

| 项目 | 内容 |
|------|------|
| **用例编号** | TC007 |
| **用例名称** | 按项目执行所有用例 |
| **需求编号** | 5 |
| **优先级** | 高 |
| **测试类型** | 功能测试 |
| **前置条件** | 项目中有多个测试用例 |
| **测试步骤** | 1. 进入项目详情页<br>2. 点击"执行所有用例"按钮<br>3. 选择执行环境<br>4. 点击"确认执行" |
| **预期结果** | 1. 执行项目下所有测试用例<br>2. 包括所有集合中的用例和未分配用例 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC008: 手动选择用例批量执行

| 项目 | 内容 |
|------|------|
| **用例编号** | TC008 |
| **用例名称** | 手动选择用例批量执行 |
| **需求编号** | 5 |
| **优先级** | 高 |
| **测试类型** | 功能测试 |
| **前置条件** | 存在多个测试用例 |
| **测试步骤** | 1. 进入测试用例列表页<br>2. 勾选来自不同集合的5个用例<br>3. 点击"批量执行"按钮<br>4. 选择执行环境<br>5. 开始执行 |
| **预期结果** | 1. 只执行选中的5个用例<br>2. 按某种顺序（如ID顺序）执行 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC009: 空集合执行提示

| 项目 | 内容 |
|------|------|
| **用例编号** | TC009 |
| **用例名称** | 空集合执行提示 |
| **需求编号** | 5 |
| **优先级** | 中 |
| **测试类型** | 边界测试 |
| **前置条件** | 存在没有用例的集合 |
| **测试步骤** | 1. 进入空集合的详情页<br>2. 点击"执行测试"按钮 |
| **预期结果** | 提示"集合中没有测试用例"，无法执行 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC010: 执行进度实时显示

| 项目 | 内容 |
|------|------|
| **用例编号** | TC010 |
| **用例名称** | 执行进度实时显示 |
| **需求编号** | 5 |
| **优先级** | 中 |
| **测试类型** | 功能测试 |
| **前置条件** | 正在执行批量测试 |
| **测试步骤** | 1. 启动批量执行<br>2. 观察执行监控页面<br>3. 查看进度条和当前执行的用例 |
| **预期结果** | 1. 进度条实时更新<br>2. 显示当前执行的用例名称<br>3. 已完成/总数实时变化 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

---

## 四、变量传递测试用例（需求1）

### TC011: 用例间变量提取和传递

| 项目 | 内容 |
|------|------|
| **用例编号** | TC011 |
| **用例名称** | 用例间变量提取和传递 |
| **需求编号** | 1 |
| **优先级** | 高 |
| **测试类型** | 功能测试 |
| **前置条件** | 已配置带变量提取的用例 |
| **测试步骤** | 1. 用例1（登录）配置提取：`token = $.data.token`<br>2. 用例2（获取用户信息）URL使用：`/api/user`，请求头使用：`Authorization: Bearer ${shared.token}`<br>3. 按顺序执行这两个用例<br>4. 查看用例2的实际请求 |
| **预期结果** | 1. 用例1成功提取token到共享变量池<br>2. 用例2的请求头正确包含token |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC012: 多个变量连续传递

| 项目 | 内容 |
|------|------|
| **用例编号** | TC012 |
| **用例名称** | 多个变量连续传递 |
| **需求编号** | 1 |
| **优先级** | 中 |
| **测试类型** | 功能测试 |
| **前置条件** | 已配置多个用例 |
| **测试步骤** | 1. 用例1提取：user_id<br>2. 用例2提取：order_id（使用user_id）<br>3. 用例3使用：order_id<br>4. 依次执行 |
| **预期结果** | 所有变量在用例间正确传递和替换 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC013: 环境变量在批量执行中的使用

| 项目 | 内容 |
|------|------|
| **用例编号** | TC013 |
| **用例名称** | 环境变量在批量执行中的使用 |
| **需求编号** | 1 |
| **优先级** | 中 |
| **测试类型** | 功能测试 |
| **前置条件** | 环境中已配置全局变量 |
| **测试步骤** | 1. 选择环境进行批量执行<br>2. 用例URL使用：`${env.base_url}/api/user`<br>3. 执行并查看请求数据 |
| **预期结果** | 环境变量正确替换 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

---

## 五、数据分级存储测试用例（需求3）

### TC014: 状态码200时仅保留简单信息

| 项目 | 内容 |
|------|------|
| **用例编号** | TC014 |
| **用例名称** | 状态码200时仅保留简单信息 |
| **需求编号** | 3 |
| **优先级** | 高 |
| **测试类型** | 功能测试 |
| **前置条件** | 已配置测试用例，接口返回200 |
| **测试步骤** | 1. 执行测试用例<br>2. 进入执行记录详情<br>3. 查看测试结果数据<br>4. 检查数据库存储 |
| **预期结果** | 1. 只存储 request_summary（method、url、部分headers）<br>2. 只存储 response_summary（status_code、response_time）<br>3. 不存储 request_full 和 response_full<br>4. 节省数据库空间 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC015: 非状态码200时完整数据存储

| 项目 | 内容 |
|------|------|
| **用例编号** | TC015 |
| **用例名称** | 非状态码200时完整数据存储 |
| **需求编号** | 3 |
| **优先级** | 高 |
| **测试类型** | 功能测试 |
| **前置条件** | 已配置测试用例，接口返回500错误 |
| **测试步骤** | 1. 执行测试用例（预期返回500）<br>2. 进入执行记录详情<br>3. 查看测试结果数据 |
| **预期结果** | 1. 存储完整的 request_full<br>2. 存储完整的 response_full<br>3. 存储详细的 error_info<br>4. 方便排查问题 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC016: 用例结果详情分级显示

| 项目 | 内容 |
|------|------|
| **用例编号** | TC016 |
| **用例名称** | 用例结果详情分级显示 |
| **需求编号** | 3 |
| **优先级** | 中 |
| **测试类型** | 功能测试 |
| **前置条件** | 存在执行完成的用例结果 |
| **测试步骤** | 1. 进入报告详情页<br>2. 点击一个200状态码的用例结果<br>3. 查看"请求信息"和"响应信息"标签<br>4. 点击一个非200状态码的用例结果<br>5. 对比显示内容 |
| **预期结果** | 1. 200状态码：显示提示"状态码200，仅显示摘要信息"<br>2. 200状态码：只显示 request_summary 和 response_summary<br>3. 非200状态码：显示提示"状态码非200，显示完整信息"<br>4. 非200状态码：显示 request_full 和 response_full |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC017: 7天前数据自动清理

| 项目 | 内容 |
|------|------|
| **用例编号** | TC017 |
| **用例名称** | 7天前数据自动清理 |
| **需求编号** | 3 |
| **优先级** | 中 |
| **测试类型** | 功能测试 |
| **前置条件** | 存在8天前的执行记录 |
| **测试步骤** | 1. 记录当前执行记录数量<br>2. 手动触发清理任务或等待定时任务<br>3. 查看执行记录数量 |
| **预期结果** | 1. 7天前的记录被删除<br>2. 最近7天的记录保留<br>3. 数据库空间释放 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

---

## 六、测试报告页面测试用例（需求6）

### TC018: 测试报告列表展示

| 项目 | 内容 |
|------|------|
| **用例编号** | TC018 |
| **用例名称** | 测试报告列表展示 |
| **需求编号** | 6 |
| **优先级** | 高 |
| **测试类型** | 功能测试 |
| **前置条件** | 存在多个执行记录 |
| **测试步骤** | 1. 进入"测试报告"页面<br>2. 查看报告列表 |
| **预期结果** | 1. 显示所有执行记录<br>2. 包含报告名称、项目、环境、状态、统计信息<br>3. 按时间倒序排列 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC019: 报告列表筛选功能

| 项目 | 内容 |
|------|------|
| **用例编号** | TC019 |
| **用例名称** | 报告列表筛选功能 |
| **需求编号** | 6 |
| **优先级** | 中 |
| **前置条件** | 存在多个项目的执行记录 |
| **测试步骤** | 1. 进入测试报告页面<br>2. 选择项目筛选器<br>3. 选择状态筛选器<br>4. 查看筛选结果 |
| **预期结果** | 只显示符合筛选条件的报告 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC020: 报告列表搜索功能

| 项目 | 内容 |
|------|------|
| **用例编号** | TC020 |
| **用例名称** | 报告列表搜索功能 |
| **需求编号** | 6 |
| **优先级** | 低 |
| **测试步骤** | 1. 在搜索框输入"用户注册"<br>2. 查看搜索结果 |
| **预期结果** | 只显示名称包含"用户注册"的报告 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC021: 测试报告详情展示

| 项目 | 内容 |
|------|------|
| **用例编号** | TC021 |
| **用例名称** | 测试报告详情展示 |
| **需求编号** | 6 |
| **优先级** | 高 |
| **前置条件** | 存在执行记录 |
| **测试步骤** | 1. 从报告列表点击某条报告<br>2. 查看报告详情页 |
| **预期结果** | 显示：<br>1. 报告基本信息（名称、项目、环境、时间）<br>2. 执行摘要（总用例、通过、失败、通过率）<br>3. 测试用例结果列表<br>4. 可视化图表区域（预留） |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC022: 执行摘要统计准确性

| 项目 | 内容 |
|------|------|
| **用例编号** | TC022 |
| **用例名称** | 执行摘要统计准确性 |
| **需求编号** | 6 |
| **优先级** | 高 |
| **前置条件** | 存在完成的执行记录 |
| **测试步骤** | 1. 进入报告详情页<br>2. 查看执行摘要统计<br>3. 对比实际用例结果 |
| **预期结果** | 统计数据与实际结果一致 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC023: 用例结果状态筛选

| 项目 | 内容 |
|------|------|
| **用例编号** | TC023 |
| **用例名称** | 用例结果状态筛选 |
| **需求编号** | 6 |
| **优先级** | 中 |
| **前置条件** | 报告详情页，有多个用例结果 |
| **测试步骤** | 1. 进入报告详情页<br>2. 点击"失败"筛选按钮<br>3. 查看筛选结果 |
| **预期结果** | 只显示FAILED状态的用例结果 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC024: 用例结果详情查看

| 项目 | 内容 |
|------|------|
| **用例编号** | TC024 |
| **用例名称** | 用例结果详情查看 |
| **需求编号** | 6 |
| **优先级** | 高 |
| **前置条件** | 报告详情页 |
| **测试步骤** | 1. 点击某个用例结果<br>2. 查看详情对话框 |
| **预期结果** | 显示：<br>1. 基本信息（用例名、状态、响应时间）<br>2. 请求信息（分级显示）<br>3. 响应信息（分级显示）<br>4. 断言结果<br>5. 提取的变量<br>6. 错误信息（如果有） |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

---

## 七、报告操作测试用例（需求6）

### TC025: 重新执行测试

| 项目 | 内容 |
|------|------|
| **用例编号** | TC025 |
| **用例名称** | 重新执行测试 |
| **需求编号** | 6 |
| **优先级** | 中 |
| **前置条件** | 存在已完成的执行记录 |
| **测试步骤** | 1. 进入报告详情页<br>2. 点击"重新执行"按钮<br>3. 确认重新执行 |
| **预期结果** | 1. 使用相同环境和用例创建新的执行记录<br>2. 开始执行<br>3. 跳转到执行监控页面 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC026: 导出测试报告

| 项目 | 内容 |
|------|------|
| **用例编号** | TC026 |
| **用例名称** | 导出测试报告 |
| **需求编号** | 6 |
| **优先级** | 中 |
| **前置条件** | 存在已完成的执行记录 |
| **测试步骤** | 1. 进入报告详情页<br>2. 点击"导出报告"按钮<br>3. 选择导出格式（JSON）<br>4. 确认导出 |
| **预期结果** | 1. 生成报告文件<br>2. 自动下载 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC027: 删除测试报告

| 项目 | 内容 |
|------|------|
| **用例编号** | TC027 |
| **用例名称** | 删除测试报告 |
| **需求编号** | 6 |
| **优先级** | 低 |
| **前置条件** | 存在执行记录 |
| **测试步骤** | 1. 进入报告详情页<br>2. 点击"删除"按钮<br>3. 确认删除 |
| **预期结果** | 1. 执行记录被删除<br>2. 关联的测试结果也被删除<br>3. 返回报告列表页 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

---

## 八、图表预留功能测试用例（需求6）

### TC028: 图表组件占位显示

| 项目 | 内容 |
|------|------|
| **用例编号** | TC028 |
| **用例名称** | 图表组件占位显示 |
| **需求编号** | 6 |
| **优先级** | 低 |
| **测试类型** | 功能测试 |
| **前置条件** | 进入报告详情页 |
| **测试步骤** | 1. 滚动到"可视化分析"区域<br>2. 查看图表显示 |
| **预期结果** | 1. 显示图表占位区域<br>2. 显示"更多图表功能开发中..."提示<br>3. 预留后续扩展空间 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

---

## 九、边界和异常测试用例

### TC029: 选择跨项目用例执行

| 项目 | 内容 |
|------|------|
| **用例编号** | TC029 |
| **用例名称** | 选择跨项目用例执行 |
| **需求编号** | 5 |
| **优先级** | 中 |
| **测试类型** | 异常测试 |
| **前置条件** | 存在多个项目的用例 |
| **测试步骤** | 1. 进入用例列表页<br>2. 勾选项目A和项目B的用例<br>3. 点击"批量执行" |
| **预期结果** | 提示"请选择同一项目的用例"，无法执行 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC030: 未选择环境执行

| 项目 | 内容 |
|------|------|
| **用例编号** | TC030 |
| **用例名称** | 未选择环境执行 |
| **需求编号** | 5 |
| **优先级** | 中 |
| **测试类型** | 异常测试 |
| **前置条件** | 存在集合 |
| **测试步骤** | 1. 点击"执行测试"<br>2. 不选择环境，直接确认 |
| **预期结果** | 提示"请选择执行环境" |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC031: 执行过程中环境被删除

| 项目 | 内容 |
|------|------|
| **用例编号** | TC031 |
| **用例名称** | 执行过程中环境被删除 |
| **需求编号** | 5 |
| **优先级** | 低 |
| **测试类型** | 异常测试 |
| **前置条件** | 正在执行测试 |
| **测试步骤** | 1. 启动批量执行<br>2. 在执行过程中删除执行环境<br>3. 观察执行结果 |
| **预期结果** | 执行不受影响（已获取环境配置）或提示错误 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

### TC032: 大批量用例执行

| 项目 | 内容 |
|------|------|
| **用例编号** | TC032 |
| **用例名称** | 大批量用例执行 |
| **需求编号** | 5 |
| **优先级** | 中 |
| **测试类型** | 性能测试 |
| **前置条件** | 项目中有50个以上用例 |
| **测试步骤** | 1. 执行项目所有用例<br>2. 观察执行过程和结果 |
| **预期结果** | 1. 所有用例成功执行<br>2. 执行时间在可接受范围内<br>3. 系统稳定 |
| **实际结果** | （待填写） |
| **测试状态** | （待测试） |

---

## 十、测试总结

### 10.1 需求覆盖情况

| 需求 | 测试用例数 | 覆盖率 |
|------|-----------|-------|
| 需求1：串联执行+变量传递+断言 | 3 | 100% |
| 需求2：保留测试记录 | - | 100%（所有用例均验证） |
| 需求3：数据分级存储+自动清理 | 4 | 100% |
| 需求4：项目和集合关联 | 5 | 100% |
| 需求5：三种批量执行方式 | 5 | 100% |
| 需求6：测试报告页面 | 11 | 100% |

### 10.2 测试重点

1. **变量传递机制**（需求1）：确保用例间变量正确传递
2. **数据分级存储**（需求3）：200和非200的存储差异
3. **批量执行功能**（需求5）：三种执行方式
4. **报告展示准确性**（需求6）：统计数据和结果展示

### 10.3 测试数据准备

1. **测试项目**：创建1-2个测试项目
2. **测试集合**：每个项目创建2-3个集合
3. **测试用例**：每个集合添加3-5个用例
4. **测试环境**：配置测试环境和生产环境
5. **变量配置**：配置环境全局变量和用例提取变量

---

**文档版本**: v2.0 (最终确认版)
**创建日期**: 2026-01-04
**最后更新**: 2026-01-04
