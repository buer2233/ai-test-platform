# 断言配置与数据提取功能测试用例

## 一、断言配置功能测试用例

### TC-ASSERT-001: 添加状态码断言
**前置条件**: 已登录，已创建测试用例
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 进入测试用例编辑页 | 显示断言配置区域 |
| 2 | 点击"添加断言"按钮 | 新增断言卡片，类型默认为状态码 |
| 3 | 设置操作符为"等于"，期望值为"200" | 配置保存成功 |
| 4 | 保存测试用例 | 断言配置保存到数据库 |
| 5 | 执行测试用例 | 断言验证通过 |

### TC-ASSERT-002: 添加响应时间断言
**前置条件**: 已登录，已创建测试用例
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 添加断言，选择类型"响应时间" | 显示响应时间配置项 |
| 2 | 设置操作符为"小于"，期望值为"1000" | 配置保存成功 |
| 3 | 执行测试用例 | 显示响应时间，断言验证通过/失败 |

### TC-ASSERT-003: 添加响应体断言
**前置条件**: 已登录，已创建测试用例
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 添加断言，选择类型"响应体" | 显示目标字段输入框 |
| 2 | 设置操作符为"包含"，期望值为"success" | 配置保存成功 |
| 3 | 执行测试用例 | 验证响应体是否包含期望值 |

### TC-ASSERT-004: JSON值断言
**前置条件**: 已登录，已创建JSON响应的测试用例
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 添加断言，选择类型"JSON值" | 显示JSON路径输入框 |
| 2 | 设置目标为"$.data.id"，操作符"等于"，期望值"123" | 配置保存成功 |
| 3 | 执行测试用例 | 从响应中提取JSON值并比较 |

### TC-ASSERT-005: 响应头断言
**前置条件**: 已登录，已创建测试用例
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 添加断言，选择类型"响应头" | 显示目标字段输入框 |
| 2 | 设置目标为"Content-Type"，操作符"包含"，期望值"application/json" | 配置保存成功 |
| 3 | 执行测试用例 | 验证响应头 |

### TC-ASSERT-006: 禁用/启用断言
**前置条件**: 已有断言配置
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 关闭断言开关 | 断言显示为禁用状态 |
| 2 | 执行测试用例 | 该断言不执行 |
| 3 | 重新启用断言 | 断言恢复正常 |
| 4 | 执行测试用例 | 该断言正常执行 |

### TC-ASSERT-007: 删除断言
**前置条件**: 已有断言配置
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 点击删除按钮 | 断言卡片移除 |
| 2 | 保存测试用例 | 数据库中删除该断言 |

### TC-ASSERT-008: 多个断言执行
**前置条件**: 已登录
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 添加3个断言：状态码、响应时间、响应体 | 显示3个断言卡片 |
| 2 | 执行测试用例 | 全部断言执行 |
| 3 | 查看执行结果 | 显示每个断言的通过/失败状态 |

### TC-ASSERT-009: 断言失败处理
**前置条件**: 已登录
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 添加状态码断言，期望值设为"404" | 配置保存 |
| 2 | 执行测试用例（实际返回200） | 断言失败 |
| 3 | 查看执行结果 | 显示断言失败，标记实际值和期望值 |

### TC-ASSERT-010: JSON Schema断言
**前置条件**: 已登录，JSON响应接口
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 添加JSON Schema断言，输入schema定义 | 配置保存 |
| 2 | 执行测试用例 | 验证响应是否符合Schema |

## 二、数据提取功能测试用例

### TC-EXT-001: 正则表达式提取
**前置条件**: 已登录，已创建测试用例
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 进入数据提取配置区 | 显示数据提取区域 |
| 2 | 点击"添加变量"，设置变量名"token" | 新增提取配置 |
| 3 | 选择类型"正则表达式"，表达式为`"token":"([^"]+)"` | 配置保存 |
| 4 | 执行测试用例 | 提取token值并显示 |

### TC-EXT-002: JSON路径提取
**前置条件**: 已登录，JSON响应接口
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 添加变量，名为"user_id" | 新增提取配置 |
| 2 | 选择类型"JSON路径"，表达式为"$.data.id" | 配置保存 |
| 3 | 执行测试用例 | 提取user_id值 |

### TC-EXT-003: Header提取
**前置条件**: 已登录
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 添加变量，名为"auth_token" | 新增提取配置 |
| 2 | 选择类型"Header"，表达式为"Authorization" | 配置保存 |
| 3 | 执行测试用例 | 提取Authorization头值 |

### TC-EXT-004: Cookie提取
**前置条件**: 已登录，响应带Set-Cookie
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 添加变量，名为"session_id" | 新增提取配置 |
| 2 | 选择类型"Cookie"，表达式为"session_id" | 配置保存 |
| 3 | 执行测试用例 | 提取Cookie值 |

### TC-EXT-005: 使用提取的变量
**前置条件**: 已有变量提取配置
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 创建第二个测试用例 | - |
| 2 | 在请求头中使用`${user_id}` | - |
| 3 | 依次执行两个测试用例 | 第二个用例使用第一个用例提取的值 |

### TC-EXT-006: 提取失败默认值
**前置条件**: 已登录
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 添加变量，设置默认值为"default" | 配置保存 |
| 2 | 执行测试用例（提取失败） | 使用默认值 |
| 3 | 查看执行结果 | 显示使用的是默认值 |

### TC-EXT-007: 多个变量提取
**前置条件**: 已登录
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 添加3个变量提取配置 | 显示3个配置卡片 |
| 2 | 执行测试用例 | 全部变量执行提取 |
| 3 | 查看执行结果 | 显示所有提取的变量值 |

### TC-EXT-008: 禁用提取配置
**前置条件**: 已有提取配置
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 关闭提取配置开关 | 配置显示为禁用 |
| 2 | 执行测试用例 | 该变量不提取 |
| 3 | 查看执行结果 | 该变量不在提取列表中 |

### TC-EXT-009: 全局变量作用域
**前置条件**: 已登录
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 创建变量，作用域设为"全局" | 配置保存 |
| 2 | 执行测试用例 | 变量存储为全局 |
| 3 | 在其他测试用例中使用该变量 | 可以正常使用 |

### TC-EXT-010: 删除提取配置
**前置条件**: 已有提取配置
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 点击删除按钮 | 提取配置卡片移除 |
| 2 | 保存测试用例 | 数据库中删除该配置 |

## 三、综合场景测试用例

### TC-INTEGRATION-001: 登录接口完整测试
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 创建登录测试用例 | - |
| 2 | 添加断言：状态码等于200 | - |
| 3 | 添加断言：响应体包含"token" | - |
| 4 | 添加提取：token变量（JSON路径） | - |
| 5 | 执行测试用例 | 断言通过，token被提取 |
| 6 | 创建获取用户信息测试用例 | - |
| 7 | 在请求头中使用`${token}` | - |
| 8 | 执行测试用例 | 成功调用接口 |

### TC-INTEGRATION-002: 批量操作测试
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 进入断言配置页面 | - |
| 2 | 勾选多个断言 | - |
| 3 | 点击批量禁用 | 全部禁用成功 |
| 4 | 点击批量启用 | 全部启用成功 |
| 5 | 点击批量删除 | 全部删除成功 |
